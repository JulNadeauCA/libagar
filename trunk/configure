#!/bin/sh
#
# Do not edit!
# File generated from configure.in by manuconf v1.1.
#
# Copyright (c) 2001, CubeSoft Communications, Inc.
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistribution of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistribution in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
# 3. Neither the name of CubeSoft Communications, nor the names of
#    its contributors may be used to endorse or promote products derived
#    from this software without specific prior written permission.
# 
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
# AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR
# ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
# SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
# CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
# OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
# USE OF THIS SOFTWARE EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
for D in $@; do
LPREFIX="`echo $D | awk -F= '{ print $1 }'`"
RPREFIX="`echo $D | awk -F= '{ print $2 }'`"
if [ "$LPREFIX" = "--prefix" ]; then
PREFIX=$RPREFIX
fi
done
if [ "$PREFIX" = "" ]; then
PREFIX=/usr/local
fi
if [ -x "`which pwd`" ]; then
S=`pwd `
else
S=""
fi
echo >Makefile.config
echo >engine/config.h
DEBUG=1
echo "#ifndef DEBUG" >> engine/config.h
echo "#define DEBUG $DEBUG" >> engine/config.h
echo "#endif /* DEBUG */" >> engine/config.h
LOCKDEBUG=1
echo "#ifndef LOCKDEBUG" >> engine/config.h
echo "#define LOCKDEBUG $LOCKDEBUG" >> engine/config.h
echo "#endif /* LOCKDEBUG */" >> engine/config.h
for OPT in $@; do
if [ "$OPT" = "--with-smpeg" ]; then
WITH_SMPEG=1
echo WITH_SMPEG=$WITH_SMPEG >> Makefile.config
else
NONE=1
fi
done
for OPT in $@; do
if [ "$OPT" = "--without-smpeg" ]; then
WITHOUT_SMPEG=1
echo WITHOUT_SMPEG=$WITHOUT_SMPEG >> Makefile.config
else
NONE=1
fi
done
if [ "$1" = "--help" ]; then
echo "Usage: ./configure [args]"
echo "    --prefix             Installation prefix [/usr/local]"
echo "    --with-smpeg         Play videos through the smpeg library [yes]"
echo "    --without-smpeg      "
exit 1
fi
echo -n "checking for gcc..."
if [ "$CC" = "" ]; then
    CC=cc
fi
cat << 'EOT' > .gcctest.c
int
main(int argc, char *argv[])
{
#ifdef __GNUC__
	return (0);
#else
	return (1);
#endif
}
EOT
$CC -o .gcctest .gcctest.c
if ./.gcctest; then
    GCC=Yes
    echo "yes"
else
    echo "no"
fi
rm -f .gcctest .gcctest.c
if [ -x "`which uname`" ]; then
UNAME=`uname `
else
UNAME=""
fi
if [ "$UNAME" = "IRIX64" ]; then
ARCH64=1
echo "#ifndef ARCH64" >> engine/config.h
echo "#define ARCH64 $ARCH64" >> engine/config.h
echo "#endif /* ARCH64 */" >> engine/config.h
else
NONE=1
fi
if [ -x "`which uname`" ]; then
UNAME=`uname -m`
else
UNAME=""
fi
if [ "$UNAME" = "sparc64" ]; then
ARCH64=1
echo "#ifndef ARCH64" >> engine/config.h
echo "#define ARCH64 $ARCH64" >> engine/config.h
echo "#endif /* ARCH64 */" >> engine/config.h
else
NONE=1
fi
echo -n "checking for SDL >= 1.2.0..."
if [ -x "`which sdl-config`" ]; then
SDL_VERSION=`sdl-config --version`
else
SDL_VERSION=""
fi
if [ -x "`which sdl-config`" ]; then
SDL_CFLAGS=`sdl-config --cflags`
else
SDL_CFLAGS=""
fi
if [ -x "`which sdl-config`" ]; then
SDL_LIBS=`sdl-config --libs`
else
SDL_LIBS=""
fi
if [ -x "`which sdl11-config`" ]; then
SDL11_VERSION=`sdl11-config --version`
else
SDL11_VERSION=""
fi
if [ -x "`which sdl11-config`" ]; then
SDL11_CFLAGS=`sdl11-config --cflags`
else
SDL11_CFLAGS=""
fi
if [ -x "`which sdl11-config`" ]; then
SDL11_LIBS=`sdl11-config --libs`
else
SDL11_LIBS=""
fi
if [ "$SDL_VERSION" != "" ]; then
SDL_FOUND=yes
echo SDL_CFLAGS=$SDL_CFLAGS >> Makefile.config
echo SDL_LIBS=$SDL_LIBS >> Makefile.config
else
NONE=1
fi
if [ "$SDL11_VERSION" != "" ]; then
SDL_FOUND=yes
SDL_CFLAGS=$SDL11_CFLAGS
SDL_LIBS=$SDL11_LIBS
echo SDL_CFLAGS=$SDL_CFLAGS >> Makefile.config
echo SDL_LIBS=$SDL_LIBS >> Makefile.config
else
NONE=1
fi
if [ "$SDL_FOUND" = "yes" ]; then
echo "ok"
else
echo "*** SDL >= 1.2.0 is required"
echo "*** Get it from http://www.libsdl.org/"
echo "ERROR: SDL >= 1.2.0 is missing"
exit 1
fi
CFLAGS="$CFLAGS -g -I$S"
echo CFLAGS=$CFLAGS >> Makefile.config
if [ "$GCC" != "" ]; then
CFLAGS="$CFLAGS -Wall -Werror -Wmissing-prototypes -Wunused"
echo CFLAGS=$CFLAGS >> Makefile.config
fi
SHAREDIR="$PREFIX/share/geggy"
echo SHAREDIR=$SHAREDIR >> Makefile.config
SHAREDIR="\"$PREFIX/share/geggy\""
echo "#ifndef SHAREDIR" >> engine/config.h
echo "#define SHAREDIR $SHAREDIR" >> engine/config.h
echo "#endif /* SHAREDIR */" >> engine/config.h
if [ "$WITHOUT_SMPEG" = "" ]; then
echo -n "checking for x11..."
if [ -d /usr/X11R6 ]; then
X11BASE=/usr/X11R6
CONF_X11=1
X11_CFLAGS=-I/usr/X11R6/include
X11_LIBS=-L/usr/X11R6/lib
else
NONE=1
fi
if [ -d /usr/X386 ]; then
X11BASE=/usr/X386
CONF_X11=1
X11_CFLAGS=-I/usr/X386/include
X11_LIBS=-L/usr/X386/lib
else
NONE=1
fi
if [ -d /usr/bin/X11 ]; then
X11BASE=/usr/bin/X11
CONF_X11=1
X11_CFLAGS=-I/usr/bin/X11/include
X11_LIBS=-L/usr/bin/X11/lib
else
NONE=1
fi
if [ "$X11BASE" != "" ]; then
echo "$X11BASE"
echo "#ifndef CONF_X11" >> engine/config.h
echo "#define CONF_X11 $CONF_X11" >> engine/config.h
echo "#endif /* CONF_X11 */" >> engine/config.h
echo X11BASE=$X11BASE >> Makefile.config
echo X11_CFLAGS=$X11_CFLAGS >> Makefile.config
echo X11_LIBS=$X11_LIBS >> Makefile.config
else
NONE=1
fi
echo -n "checking for smpeg >= 0.4.3..."
if [ -x "`which smpeg-config`" ]; then
SMPEG_VERSION=`smpeg-config --version`
else
SMPEG_VERSION=""
fi
if [ -x "`which smpeg-config`" ]; then
SMPEG_CFLAGS=`smpeg-config --cflags`
else
SMPEG_CFLAGS=""
fi
if [ -x "`which smpeg-config`" ]; then
SMPEG_LIBS=`smpeg-config --libs`
else
SMPEG_LIBS=""
fi
if [ "$SMPEG_VERSION" != "" ]; then
echo "ok"
echo "#ifndef CONF_SMPEG" >> engine/config.h
echo "#define CONF_SMPEG $CONF_SMPEG" >> engine/config.h
echo "#endif /* CONF_SMPEG */" >> engine/config.h
echo SMPEG_CFLAGS=$SMPEG_CFLAGS >> Makefile.config
echo SMPEG_LIBS=$SMPEG_LIBS >> Makefile.config
else
NONE=1
fi
fi
echo PREFIX=$PREFIX >> Makefile.config
echo "#ifndef PREFIX" >> engine/config.h
echo "#define PREFIX \"$PREFIX\"" >> engine/config.h
echo "#endif /* PREFIX */" >> engine/config.h
