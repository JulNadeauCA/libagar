.\"	$Csoft: text.3,v 1.5 2003/06/06 03:18:14 vedge Exp $
.\"
.\" Copyright (c) 2002, 2003 CubeSoft Communications, Inc.
.\" <http://www.csoft.org>
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
.\" INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
.\" (INCLUDING BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
.\" SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
.\" STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
.\" IN ANY WAY OUT OF THE USE OF THIS SOFTWARE EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd April 24, 2003
.Dt TEXT 3
.Os
.ds vT Agar API Reference
.ds oS Agar 1.0
.Sh NAME
.Nm text
.Nd agar font engine interface
.Sh SYNOPSIS
.Bd -literal
#include <engine/widget/text.h>
.Ed
.Sh DESCRIPTION
The
.Nm
interface uses an underlying font engine to render multi-line strings and
characters into
.Xr SDL_Surface 3 's.
.Pp
If support for the FreeType library was enabled at compile time, FreeType is
used as the underlying font engine, otherwise simple bitmap fonts are used.
.Sh INITIALIZATION
.nr nS 1
.Ft int
.Fn text_init "void"
.Pp
.Ft void
.Fn text_destroy "void"
.Pp
.Ft void
.Fn text_set_default_font "char *name" "int size" "int style"
.Pp
.nr nS 0
The
.Fn text_init
function initializes the font engine.
.Fn text_destroy
frees all resources allocated by the font engine.
.Pp
The
.Fn text_default_font
function sets the default font when unspecified.
.Sh FONT INFORMATION
.nr nS 1
.Ft int
.Fn text_font_height "ttf_font *font"
.Pp
.Ft int
.Fn text_font_ascent "ttf_font *font"
.Pp
.Ft int
.Fn text_font_descent "ttf_font *font"
.Pp
.Ft int
.Fn text_font_line_skip "ttf_font *font"
.Pp
.nr nS 0
These functions return information specific to a given font.
.Fn text_font_height
returns the total height of the font in pixels.
.Fn text_font_ascent
returns the offset from the baseline to the top of the font.
.Fn text_font_descent
returns the offset from the baseline to the bottom of the font.
.Fn text_font_line_skip
returns the recommended spacing in pixels between lines of text.
.Sh RENDERING
.nr nS 1
.Ft "SDL_Surface *"
.Fn text_render "const char *fontname" "int font_size" "Uint32 color" "char *s"
.Pp
.Ft "SDL_Surface *"
.Fn text_render_glyph "const char *fontname" "int font_size" "Uint32 color" \
                      "char ch"
.Pp
.Ft "void"
.Fn text_prescale "const char *text" "int *w" "int *h"
.nr nS 0
.Pp
The
.Fn text_render
function renders the (possibly multi-line) string
.Fa s
to a new surface.
.Fn text_render_glyph
renders the character
.Fa ch
to a new surface.
For both functions, the
.Fa font
argument may be NULL and the
.Fa font_size
argument may be -1 to indicate that the defaults should be used.
.Fn text_render
and
.Fn text_render_glyph
both raise a fatal condition if an error occured.
.Pp
The
.Fn text_prescale
function stores the expected size of the text surface in non-NULL
.Fa w
and
.Fa h
arguments.
.Sh SEE ALSO
.Xr agar 3 ,
.Xr widget 3 ,
.Xr window 3 ,
.Xr label 3 ,
.Xr textbox 3
.Xr tlist 3
.Pp
.Bd -literal
The FreeType project - http://www.freetype.org/
.Ed
.Sh HISTORY
The
.Nm
interface first appeared in Agar 1.0.
